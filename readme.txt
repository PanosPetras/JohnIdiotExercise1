Ομάδα:
ΟΡΦΑΝΙΔΗΣ ΔΗΜΗΤΡΙΟΣ - 1115202100128
ΠΕΤΡΑΚΟΠΟΥΛΟΣ ΠΑΝΑΓΙΩΤΗΣ - 1115202100155
ΤΖΙΜΑΣ ΘΕΟΔΩΡΟΣ - 1115202000190

Σχόλια:
Στον κώδικα έχουν υλοποιηθεί όλες οι απαραίτητες συναρτήσεις που ζητούνταν από την εκφώνηση.
Αρχικά δημιουργήσαμε τα structs HP_info και HP_block_info τα οποία περιέχουν τα metadata για όλο το αρχείο και για κάθε block αντίστοιχα. Στο HP_info περιέχεται ένα character array name όπου αποθηκεύουμε το όνομα του αρχείου,  ο συνολικός αριθμός records, ο μέγιστος αριθμός records ανά block (τέθηκε ως 6), το μέγεθος των records, ένας δείκτης στο πρώτο block του αρχείου και ένας ακέραιος με το ID του τελευταίου block.Στο HP_block_info περιέχεται το ID του συγκεκριμένου block και τα συνολικά records που εμπεριέχονται σε αυτό.
Στην HP_CreateFile αρχικοποιείται και δημιουργείται το αρχείο σωρού. Καλώντας την BF_CreateFile δημιουργείται αρχικά το αρχείο με τα blocks εάν αυτό δεν υπάρχει ήδη. Έπειτα η BF_OpenFile ανοίγει το αρχείο, επιστρέφοντας το αναγνωριστικό του και καλώντας την initializeFirstBlockOfFile, αρχικοποιείται το πρώτο block του αρχείου ώστε να περιέχει τα metadata HP_info. Κατά την κλήση του, δεσμεύεται η μνήμη για το πρώτο block, αρχικοποιούνται με κατάλληλα ορίσματα τα στοιχεία του και αντιγράφονται στο συγκεκριμένο σημείο μνήμης. Το Block γίνεται dirty καθώς πλέον περιλαμβάνει δεδομένα εντός του τα οποία γράφονται στον δίσκο, γίνεται Unpin ώστε να φύγει από το επίπεδο BF και τέλος η θέση που κατέλαβε αποδεσμεύεται. Έπειτα τερματίζει η ανάγνωση του αρχείου.
Στην HP_OpenFile, χρησιμοποιείται η BF_OpenFile για το άνοιγμα του αρχείο, δεσμεύεται χώρος για το πρώτο block στο επίπεδο BF και επιστρέφονται τελικά τα metadata που βρίσκονται στο πρώτο block αφού πρώτα αποδεσμευτεί το block από το επίπεδο BF.  Εδώ δεν υπάρχει καμία αλλαγή στο block οπότε δεν χρειάζεται η επανεγγραφή στον δίσκο. 
Η HP_CloseFile είναι υπεύθυνη για την τελική αποδέσμευση των block του αρχείου από το επίπεδο BF.  Η συνάρτηση καλεί αρχικά την unpinAllBlocksFromFile. Η συγκεκριμένη συνάρτηση, δέχεται ως όρισμα το αναγνωριστικό του αρχείου καθώς και το ID του τελευταίου του block από τα metadata του ΗP_info. Κάθε block του αρχείου το οποίο βρίσκεται στο BF επίπεδο γίνεται unpin και τελικά η BF_CloseFile κλείνει το αρχείο.
Η HP_InsertEntry είναι τελικά υπεύθυνη για την εκχώρηση κάθε record, κατανέμοντας τα σε κάθε block εντός του αρχείου σωρού. Ως όρισμα δέχεται το αναγνωριστικό file_desc, τα μεταδεδομένα hp_info του πρώτου block και το record προς εκχώρηση. Εφόσον υπάρχει μόνο το πρώτο block με τα metadata, το record εκχωρείται σε νέο block. Εάν ωστόσο υπάρχουν παραπάνω block, ελέγχουμε εάν το τελευταίο block του αρχείου είναι γεμάτο από records. Εάν είναι, τότε εκχωρείται το record σε νέο block, αλλιώς εκχωρείται στο τελευταίο block εφόσον αυτό έχει χώρο. Για όλες αυτές ενέργειες, έχουν οριστεί κάποιες βοηθητικές συναρτήσεις.
1.	Η RecordsInLastBlockOfFile είναι υπεύθυνη για την επιστροφή του αριθμού των records που βρίσκονται ήδη στο τελευταίο block. Δεσμεύεται χώρος στο επίπεδο BF ώστε να περαστεί το τελευταίο block και να υπάρχει πρόσβαση στα metadata του , HP_block_info, τα οποία βρίσκονται στο τέλος τoυ block, δηλαδή στα τελευταία 8 bytes (2 integers των 4 bytes o καθένας). Τέλος αποδεσμεύεται το block από το επίπεδο BF και επιστρέφεται ο αριθμός των records στο τελευταίο block.
2.	Η AddRecordToLastBlock χρησιμοποιείται στις περιπτώσεις όπου υπάρχει ακόμη χώρος για records στο τελευταίο block. Αφού περαστεί το block στο επίπεδο bf, αποθηκεύεται το record στην αντίστοιχη θέση μνήμης με βάση τον υπάρχοντα αριθμό records, αυξάνεται ο αριθμός των records τόσο στα metadata του block όσο και ολόκληρου του αρχείου, το block γίνεται dirty ώστε να γίνει η εγγραφή του αλλαγμένου πλέον block στον δίσκο και unpin και destroy ώστε το block να φύγει από το επίπεδο BF και να αποδεσμευτεί ο χώρος που κατάλαβε σε αυτόν. 
3.	Η AddRecordsToNewBlock καλείται στην περίπτωση όπου το τελευταίο block είναι γεμάτο και πρέπει να δημιουργηθεί καινούριο για να γίνει εισαγωγή ενός record. Η μόνη διαφορά με την AddRecordToLastBlock είναι ότι κάνει allocate την μνήμη για το νέο block και αρχικοποιεί τα metadata του ενώ παράλληλα αλλάζει το HP_info ώστε να περιλαμβάνει το ίδιο ως το νέο τελευταίο block.
Η HP_GetAllEntries είναι υπεύθυνη για την εκτύπωση των records με συγκεκριμένο ID εντός όλων των blocks του αρχείου.  Διατρέχονται όλα τα blocks , ανοίγει κάθε ένα στο BF επίπεδο και διατρέχονται όλα τα records ώστε να βρεθούν εκείνα με το κατάλληλο ID. Όταν βρεθεί record με το ID τότε εκτυπώνεται. Κάθε block γίνεται unpin αφού ελεγχθούν όλα τα records του. Στο τέλος, εφόσον ελεγχθούν όλα τα blocks, αποδεσμεύεται η μνήμη που έγινε initialized στο BF επίπεδο και επιστρέφεται το id του block στο οποίο βρισκόταν το record.  
